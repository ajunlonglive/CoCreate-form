!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.form=e():(t.CoCreate=t.CoCreate||{},t.CoCreate.form=e())}(this,function(){return r={},o.m=n=[function(t,e,n){"use strict";n.r(e);var r={selectors:[],modules:[],__init:function(){var t=document.querySelectorAll("form"),e=this;this.__setSubmitEvent(),t.forEach(function(t){e.__initAttribute(t)})},initElement:function(t){var e,n=t||document;n.querySelectorAll&&(t=n.querySelectorAll("form"),e=this,(t=0===t.length&&n!=document&&"FORM"===n.tagName?[n]:t).forEach(function(t){e.__initAttribute(t),e.disableAutoFill(t)}))},disableAutoFill:function(t){"TEXTAREA"==t.tagName&&(t.value="",t.setAttribute("autocomplete","off")),t.hasAttribute("autocomplete")||t.setAttribute("autocomplete","off")},__initAttribute:function(t){var e=t.getAttribute("data-collection")||"",n=t.getAttribute("data-realtime"),r=t.getAttribute("data-document_id")||"";t.querySelectorAll("[name], [data-pass_to]").forEach(function(t){t.parentNode.classList.contains("template")||(null==t.getAttribute("data-realtime")&&n&&t.setAttribute("data-realtime",n),t.getAttribute("name")&&!t.hasAttribute("data-collection")&&e&&t.setAttribute("data-collection",e),t.getAttribute("data-pass_to")&&!t.hasAttribute("data-pass_collection")&&e&&t.setAttribute("data-pass_collection",e),t.getAttribute("name")&&!t.getAttribute("data-document_id")&&r&&t.setAttribute("data-document_id",r),t.hasAttribute("data-document_id")||null==r||t.setAttribute("data-document_id",r))})},__setSubmitEvent:function(){var e=this;document.addEventListener("clicked-submitBtn",function(t){var n=t.detail.element;e.modules.forEach(function(t){var e=t.selector,t=t.callback;t&&n.matches(e)&&t.call(null,n)})})},__checkFormValidate:function(t){return void 0===CoCreate.unique||CoCreate.unique.checkValidate(t)},__isTemplateInput:function(t){if(t.classList.contains("template"))return!0;for(var e=t.parentNode;e;){if(e.classList&&e.classList.contains("template"))return!0;e=e.parentNode}return!1},getFormData:function(t){var e=this.modules.map(function(t){return t.selector}),e=t.querySelectorAll(e.join(",")),o=[];e.forEach(function(t){var e=t.getAttribute("data-collection"),n=t.getAttribute("data-document_id"),r=t.getAttribute("name");"false"!=t.getAttribute("data-save_value")&&(!n&&r||o.find(function(t){return t.collection==e&&t.document_id==n}))})},init:function(t){var e=t.name,n=t.selector,t=t.callback;this.modules.push({name:e,selector:n,callback:t}),n&&this.selectors.push(n)},get:function(){return{selectors:this.selectors}}};r.__init(),CoCreate.core.registerInit(r.initElement,r),CoCreate.observer.init({name:"CoCreateForm",observe:["subtree","childList"],include:"form",callback:function(t){r.initElement(t.target)}}),e.default=r}],o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0).default;function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var n,r});